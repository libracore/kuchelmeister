{
 "align_labels_right": 0,
 "creation": "2019-10-16 11:21:15.912220",
 "css": "#simple{\n border: 0;\n border-bottom: 1px solid;\n line-height: 25px;\n}\n\n#double{\n  border: 0;\n  border-bottom: 3px double;\n line-height: 25px;\n}\n\n#simpleWhite{\n border: 0;\n border-bottom: 1px solid #ffffff;\n line-height: 25px;\n}\n\n#doubleWhite{\n  border: 0;\n  border-bottom: 3px double #ffffff;\n line-height: 25px;\n}\n\n\ntable, th, td {\n /* border: 1px solid black; */\n color: black;\n margin-top: 10px;\n}\n\n.table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td {\n  border-top: 0px;\n}\n\n@font-face {\n        font-family: 'Frutiger';\n        font-style: normal;\n        font-weight: normal;\n        src: url('/assets/erpnextswiss/fonts/frutiger/Frutiger.woff');\n    }\n    \n@font-face {\n    font-family: 'Frutiger Bold';\n    font-style: normal;\n    font-weight: normal;\n    src: url('/assets/erpnextswiss/fonts/frutiger/Frutiger_bold.woff');\n}",
 "custom_format": 1,
 "disable_smart_shrinking": 0,
 "disabled": 0,
 "doc_type": "Sales Invoice",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "html": "<!-- letter head content part -->\n<div  id=\"header-html\" class=\"hidden-pdf\" >\n{% set letter_head = frappe.get_doc(\"Letter Head\", \"Kuchelmeister\") %}\n    {% if letter_head %}\n        {{ letter_head.content }}\n    {% else %}\n<p>Letter head Commercial not found. Please define the letter head under print settings</p>\n        {% endif %}\n</div>\n\n<!-- accounts -->\n{% if \"1101\" in doc.debit_to %} <!-- EUR debtor -->\n  {% set receiving_account = \"CH69 0873 1550 0006 4200 2\" %}\n{% else %}\n {% if doc.esr_reference %}\n   {% set receiving_account = \"CH48 3016 2550 0006 4200 1\" %}\n {% else %}\n   {% set receiving_account = \"CH96 0873 1550 0006 4200 1\" %}\n {% endif %}\n{% endif %}\n\n<!-- header part -->\n{% if doc.items %}\n\t{% set sales_ord = doc.items[0].sales_order %}\n\t{% set delivery_note = doc.items[0].delivery_note %}\n{% else %}\n\t{% set sales_ord = None %}\n\t{% set delivery_note = None %}     \n{% endif %}\n<table style=\"width: 100%;\">\n  <tr>\n    <td style=\"width: 50%; \"><!--  LEFT -->\n\t\t<p> Lieferadresse:<br>\n            {% if doc.shipping_address_name %}\n              {% set shipping_address = frappe.get_doc(\"Address\", doc.shipping_address_name) %}\n              {% if shipping_address.address_type == \"Subsidiary\" %}\n                <b>{{ shipping_address.company_name }}</b>\n              {% else %}\n                <b>{{ doc.customer_name }}</b>\n              {% endif %}\n              <br>\n              {{ doc.shipping_address }}\n            {% else %}\n              <b>{{ doc.customer_name }}</b><br>\n            {% endif %}<br>\n\t\t\t<br>\n\t\t\t<br>\n\t\t\t<b> {{ doc.customer_name }}</b> <br>\n\t\t\t{% if doc.address_display%} {{ doc.address_display }}{% endif %}\n\t\t\t<br>\n        </p>\n\t</td>\n\t<td style=\"width: 50%; \"><!-- RIGHT -->\n\t\t<h4>{% if doc.is_return %}Gutschrift{% else %}Rechnung{% endif %} {{doc.name}}</h4>\n\t\t<table style=\"width: 100%;\">\n\t\t  <tr><td style=\"padding: 0px !important; width: 45%; \"><b>Datum: </b></td><td style=\"padding: 0px !important; width: 55%;\"><b>{{ doc.get_formatted('posting_date') }}</b></td></tr>\n\t\t  <tr><td style=\"padding: 0px !important; width: 45%; \">\n\t\t      {% if doc.is_return %}\n\t\t        <b>Rechnungs-Nr.: </b></td><td style=\"padding: 0px !important; width: 55%;\"><b>{{ doc.return_against or \"-\" }}</b></td></tr>\n\t\t      {% else %}\n\t\t        <b>Auftrags-Nr./LS-Nr.: </b></td><td style=\"padding: 0px !important; width: 55%;\"><b>{{ sales_ord or \"-\" }} / {{ delivery_note or \"-\" }}</b></td></tr>\n\t\t      {% endif %}\n          {% if doc.contact_person %}\n\t\t\t{% set contact = frappe.get_doc(\"Contact\", doc.contact_person) %}\n\t\t    <tr><td style=\"padding: 0px !important; \">Ihr Sachbearbeiter(in): </td><td style=\"padding: 0px !important; \">{{contact.salutation or \"\" }} {{contact.first_name}} {{contact.last_name}}</td></tr>\n\t\t    {% if contact.phone %}\n              <tr><td style=\"padding: 0px !important; \">Ihre Telefon-Nr.: </td><td style=\"padding: 0px !important; \">{{ contact.phone }}</td></tr>\n\t\t\t{% endif %}\n\t\t  {% endif %}\t\n          <tr><td style=\"padding: 0px !important; \">Ihr Ansprechpartner</td><td style=\"padding: 0px !important; \">{% set owner = frappe.get_doc(\"User\", doc.owner ) %}{{ owner.full_name }}</td></tr>\n          {% if doc.items[0].blanket_order %}{% set blanket_order = frappe.get_doc(\"Blanket Order\", doc.items[0].blanket_order) %}<tr><td style=\"padding: 0px !important; \">Ihr Rahmenauftrag</td><td style=\"padding: 0px !important; \">{{ blanket_order.external_reference or blanket_order.name }}</td></tr>{% endif %}\n          {% if doc.object %}<tr><td style=\"padding: 0px !important; \"><b> Objekt: </b> </td><td style=\"padding: 0px !important; \"><b>{{ doc.object }}</b></td></tr>{% endif %}\n\t\t  <tr><td style=\"padding: 0px !important; \">Bestellung vom:</td><td style=\"padding: 0px !important; \">{% if doc.po_date %}{{ doc.get_formatted('po_date') }}{% else %}-{% endif %}</td></tr>\n          <tr><td style=\"padding: 0px !important; \">Ihre Bestell-Nr.:</td><td style=\"padding: 0px !important; \">{{ doc.po_no or \"-\" }}</td></tr>\n\t\t  <tr><td style=\"padding: 0px !important; \"><b>Lieferdatum:</b></td><td style=\"padding: 0px !important; \">\n\t\t  {% if delivery_note  %}\n\t\t\t{% set dn_doc = frappe.get_doc(\"Delivery Note\", delivery_note) %}\n\t\t\t<strong>{{ frappe.utils.get_datetime(dn_doc.posting_date).strftime('%d.%m.%Y') }}</strong>        \n\t\t  {% else %}\n\t\t  -\n\t\t  {% endif %}\n\t\t</td></tr>\n\t\t</table>\n\t</td>\n  </tr>\n</table>\n\n<!-- check discount -->\n{% set vars = {'has_discount': 0} %}\n{% for n in doc.items %}\n  {% if n.staffelrabatt %}{% if vars.update({'has_discount': 1}) %}{% endif %}{% endif %}\n{% endfor %}\n\n<table class=\"table\" style=\"width: 100%; border: 1px solid silver;\" >\n    <tr>\n        <td style=\"border: 1px solid silver; width: 5.9%; text-align: center; font-weight: bold\">Pos.</td>\n        <td style=\"border: 1px solid silver; width: 8.3%; text-align: center; font-weight: bold\">Anz.</td>\n        <td style=\"border: 1px solid silver; width: 5.5%; text-align: left; font-weight: bold\">Einh.</td>\n        <td style=\"border: 1px solid silver; width: 51%; text-align: left; font-weight: bold\">Bezeichnung</td>\n        <td style=\"border: 1px solid silver; width: 10.8%; text-align: right; font-weight: bold\">Preis</td>\n        {% if vars.has_discount %}<td style=\"border: 1px solid silver; width: 8.5%; text-align: right; font-weight: bold\">Rabatt</td>{% endif %}\n        <td style=\"border: 1px solid silver; width: 10%; text-align: right; font-weight: bold\">Total</td>\n    </tr>\n    {% for n in doc.items %}\n        <tr>\n            <td style=\"border-left: 1px solid silver; border-right: 1px solid silver; text-align: center\">{{ loop.index }}</td>\n            <td style=\"border-left: 1px solid silver; border-right: 1px solid silver; text-align: right\">{{ n.qty }}</td>\n            <td style=\"border-left: 1px solid silver; border-right: 1px solid silver; text-align: left\">{{ n.uom }}</td>\n            <td style=\"border-left: 1px solid silver; border-right: 1px solid silver; text-align: left\"> \n                {% set item = frappe.get_doc(\"Item\", n.item_code) %}\n                {{ n.item_name }}<br>\n                {% if n.beschreibung_drucken or (not n.item_name in n.description and not n.item_code in n.description) %}{{ n.description }}<br>{% endif %}\n                {% if item.material %}Material: {{ item.material }}<br>{% endif %}\n                {% if item.drawing_no %}Plan Nr. {{ item.drawing_no }}{% endif %}\n            </td>\n            <!-- <td style=\"border-left: 1px solid silver; border-right: 1px solid silver; text-align: right\">\n                {{ \"{:,.2f}\".format(n.rate).replace(\",\", \"'\") }}\n            </td>\n            <td style=\"border-left: 1px solid silver; border-right: 1px solid silver; text-align: right\">\n                {% if n.discount_percentage %}\n                    {{ \"{:.0f}\".format(n.discount_percentage) }} %\n                {% endif %}\n            </td>-->\n            <td style=\"border-left: 1px solid silver; border-right: 1px solid silver; text-align: right\">\n                {{ \"{:,.2f}\".format(n.staffelpreis).replace(\",\", \"'\") }}\n            </td>\n            {% if vars.has_discount %}<td style=\"border-left: 1px solid silver; border-right: 1px solid silver; text-align: right\">\n                {% if n.staffelrabatt %}\n                    {{ \"{:.0f}\".format(n.staffelrabatt) }} %\n                {% endif %}\n            </td>{% endif %}\n            <td style=\"border-left: 1px solid silver; border-right: 1px solid silver; text-align: right\">\n                {{ \"{:,.2f}\".format(n.amount).replace(\",\", \"'\") }}\n            </td>\n        </tr>\n    {% endfor %}\n</table>\n\n\n\n\n    <!-- CONDITIONS -->\n<table style=\"width: 100%;\">\n    <tr>\n        <td style=\"width: 60%; \">\n            <b> Wir freuen uns, f\u00fcr Sie fertigen zu d\u00fcrfen.</b><br>\n            <b>KUCHELMEISTER Blechverarbeitung AG</b>\n        </td>\n        <td style=\"text-align: right; width: 30%; \">\n            <b>Total netto {{ doc.currency }}</b><br>\n            {% if doc.discount_amount > 0 %}{{ _(\"Discount\") }} {{ doc.currency }}<br>{% endif %}\n            {% if doc.taxes %}{{ doc.taxes[0].description }} {{ doc.currency }}<br>{% endif %}\n            {% if doc.rounding_adjustment %}Rundung<br>{% endif %}\n            <b> Rechnungsbetrag {{ doc.currency }}</b>\n        </td>\n        <td style=\"text-align: right; width: 10%; \">\n            <b>{{ \"{:,.2f}\".format(doc.net_total).replace(\",\", \"'\") }}</b><br>\n            {% if doc.discount_amount > 0 %}-{{\"{:,.2f}\".format(doc.discount_amount).replace(\",\", \"'\") }}<br>{% endif %}\n            {% if doc.taxes %}{{ \"{:,.2f}\".format(doc.taxes[0].tax_amount).replace(\",\", \"'\") }}<br>{% endif %}\n            {% if doc.rounding_adjustment %}{{ \"{:,.2f}\".format(doc.rounding_adjustment) }}<br>{% endif %}\n            <b>{{ \"{:,.2f}\".format(doc.rounded_total or doc.grand_total).replace(\",\", \"'\") }}</b>\n        </td>\n    </tr>\n    <tr>\n        {% if doc.is_return %}\n        <td></td>\n        <td></td>\n        {% else %}\n        <td>Bitte \u00fcberweisen Sie {{ doc.currency }} \n        {{ \"{:,.2f}\".format(doc.rounded_total or doc.grand_total).replace(\",\", \"'\") }} \n        mit Referenz {{ doc.esr_reference or doc.name }} per {{ doc.get_formatted('due_date') }} \n        auf Konto {{ receiving_account }}</td>\n        <td style=\"text-align: right;\" colspan=2>Konditionen: \n          {% if doc.payment_terms_template%} {{ doc.payment_terms_template }} {% endif %}\n          </td>\n        {% endif %}\n    </tr>\n</table>\n\n<!-- QR section -->\n{% if doc.outstanding_amount > 0 %}\n<div class=\"page-break\"></div>\n\n<!-- QR code section -->\n<!-- get receiver details -->\n{% set company = frappe.get_doc(\"Company\", doc.company) %}\n{% set cmp_address_line_detail = {'name': doc.company, 'street': 'Rheinaustrasse', 'number': '12', 'pin': \"7320\", 'city': \"Sargans\", 'country': \"CH\" } %}\n\n<!-- get payer details -->\n{% if doc.customer_address %}\n  {% set pay_addr = frappe.get_doc(\"Address\", doc.customer_address) %}\n{% endif %}\n{% if pay_addr %}\n  {% set pay_address_array = pay_addr.address_line1.split(\" \") %}\n  {% set pay_address_line_item_count = pay_address_array | count %}\n  {% set pay_country = frappe.get_doc(\"Country\", pay_addr.country) %}\n  {% set pay_country_code = pay_country.code | upper %}\n  {% set pay_address_line_detail = {'name': doc.customer_name, 'street': '', 'number': '', 'pin': pay_addr.pincode, 'city': pay_addr.city, 'country': pay_country_code } %}\n  {% for i in range(0, (pay_address_line_item_count - 1)) %}\n    {% if pay_address_line_detail.update({'street': pay_address_line_detail.street + \" \" + pay_address_array[i] }) %}{% endif %}\n  {% endfor %}\n  {% if pay_address_line_detail.update({'number': pay_address_array[pay_address_line_item_count - 1]}) %}{% endif %}\n\n<table style=\"width: 100%; page-break-inside: avoid !important; font-family: 'Frutiger'; \">\n <tr><!-- three columns -->\n \n  <td style=\"width: 220px; padding: 20px !important; border-top: 1px solid silver; border-left: 1px solid silver; border-bottom: 1px solid silver;\"><!-- blank 1. column -->\n      <table style=\"width: 100%; height: 397px; font-size: 11pt;\">\n       <tr><td><b>{{ _(\"Empfangsschein\") }}</b></td></tr>\n       <tr><td style=\"font-size:8pt; border-top: 1px solid silver;\"><b><span style=\"font-size: 6pt\">{{ _(\"Konto / Zahlbar an\") }}</span></b><br />\n          {{ receiving_account or _(\"Company default bank IBAN not found\") }}<br />\n          {{ cmp_address_line_detail.name }}<br />\n          {{ cmp_address_line_detail.street }} {{ cmp_address_line_detail.number }}<br />\n          {{ cmp_address_line_detail.country }}-{{ cmp_address_line_detail.pin }} {{ cmp_address_line_detail.city }}<br />\n       </td></tr>\n       <tr><td style=\"font-size:8pt;\"><b><span style=\"font-size: 6pt\">{{ _(\"Referenz\") }}</span></b><br />\n          {{ doc.esr_reference or doc.name }}\n       </td></tr>\n       <tr><td style=\"font-size:8pt;\"><b><span style=\"font-size: 6pt\">{{ _(\"Zahlbar durch\") }}</span></b><br />\n          {{ pay_address_line_detail.name }}<br />\n          {{ pay_address_line_detail.street }} {{ pay_address_line_detail.number }}<br />\n          {{ pay_address_line_detail.country }}-{{ pay_address_line_detail.pin }} {{ pay_address_line_detail.city }}<br />\n       </td></tr>\n\t   <tr><td style=\"padding: 0px !important; \">\n        <table style=\"width: 100%; font-size:8pt;\">\n\t\t  <tr>\n           <td style=\"width:20%;\">{{ _(\"W\u00e4hrung\") }}</td>\n           <td style=\"width:20%\">{{ _(\"Betrag\") }}</td>\n          </tr>\n\t\t  <tr>\n           <td style=\"width:20%;\">{{ doc.currency }}</td><!-- must be with space as thousand separator and point for decimal, 2 decimals -->\n           <td style=\"width:20%;\">{{ \"{:,.2f}\".format(doc.outstanding_amount).replace(\",\", \" \") }}</td>\n          </tr>\n        </table>\n\t   </td></tr>\n        <tr>\n          <td style=\"text-align: right; padding: 0px !important; font-size:6pt; border-top: 1px solid silver;\">\n            <b>{{ _(\"Annahmestelle\") }}</b>\n\t\t  </td>\n\t\t</tr>\n\t   </table>\n   </td>\n\t   \n  <!-- blank 2. column -->\n  <td style=\"width: 280px; height: 397px; padding-top: 20px !important; padding-left: 20px !important; padding-bottom: 20px !important; border-top: 1px solid silver; border-left: 1px solid silver; border-bottom: 1px solid silver;\">\n       <table style=\"width: 100%; \">\n        <tr><td><b><span style=\"font-size: 11pt ;\">{{ _(\"Zahlteil\") }}</span></b></td></tr>\n        <tr><td>{{ _(\"Unterst\u00fctzt\") }}<br />{{ _(\"\u00dcberweisung\") }}</td></tr>\n        <tr><td><!-- QR code -->\n        {% if doc.esr_reference %}\n             <img src=\"https://data.libracore.ch/phpqrcode/api/iso20022.php?iban={{ receiving_account or ''}}&receiver_name={{ cmp_address_line_detail.name }}&receiver_street={{ cmp_address_line_detail.street | trim }}&receiver_number={{ cmp_address_line_detail.number }}&receiver_pincode={{ cmp_address_line_detail.pin }}&receiver_town={{ cmp_address_line_detail.city }}&receiver_country={{ cmp_address_line_detail.country }}&amount={{ doc.outstanding_amount }}&currency={{ doc.currency }}&payer_name={{ pay_address_line_detail.name }}&payer_street={{ pay_address_line_detail.street | trim }}&payer_number={{ pay_address_line_detail.number }}&payer_pincode={{ pay_address_line_detail.pin }}&payer_town={{ pay_address_line_detail.city }}&payer_country={{ pay_address_line_detail.country }}&reference_type=QRR&&reference={{ doc.esr_reference }}&message={{ doc.name }}\" style=\"width: 46mm !important; height: 46mm !important;\" />\n        {% else %}\n            <img src=\"https://data.libracore.ch/phpqrcode/api/iso20022.php?iban={{ receiving_account or ''}}&receiver_name={{ cmp_address_line_detail.name }}&receiver_street={{ cmp_address_line_detail.street | trim }}&receiver_number={{ cmp_address_line_detail.number }}&receiver_pincode={{ cmp_address_line_detail.pin }}&receiver_town={{ cmp_address_line_detail.city }}&receiver_country={{ cmp_address_line_detail.country }}&amount={{ doc.outstanding_amount }}&currency={{ doc.currency }}&payer_name={{ pay_address_line_detail.name }}&payer_street={{ pay_address_line_detail.street | trim }}&payer_number={{ pay_address_line_detail.number }}&payer_pincode={{ pay_address_line_detail.pin }}&payer_town={{ pay_address_line_detail.city }}&payer_country={{ pay_address_line_detail.country }}&reference_type=NON&message={{ doc.name }}\" style=\"width: 46mm !important; height: 46mm !important;\" />\n        {% endif %}\n        </td></tr>\n        <tr><td>\n         <table style=\"width: 100%;\">\n          <tr>\n           <td>{{ _(\"W\u00e4hrung\") }}</td>\n           <td>{{ _(\"Betrag\") }}</td>\n          </tr>\n          <tr>\n           <td>{{ doc.currency }}</td><!-- must be with space as thousand separator and point for decimal -->\n           <td>{{ \"{:,.2f}\".format(doc.outstanding_amount).replace(\",\", \" \") }}</td>\n          </tr>\n         </table>\n        </td></tr>\n       </table>\n   </td>\n      \n<!-- 3. column -->\n  <td style=\"width: 280px; height: 397px; padding-top: 20px !important; padding-right: 20px !important; padding-bottom: 20px !important;border-top: 1px solid silver; border-bottom: 1px solid silver; border-right: 1px solid silver;\">\n   <table>\n    <tr><td>{{ _(\"Konto\") }}<br />{{ receiving_account or _(\"Company default bank IBAN not found\") }}</td></tr>\n    <tr><td>{{ _(\"Zahlungsempf\u00e4nger\") }}<br />\n      {{ cmp_address_line_detail.name }}<br />\n      {{ cmp_address_line_detail.street }} {{ cmp_address_line_detail.number }}<br />\n      {{ cmp_address_line_detail.country }}-{{ cmp_address_line_detail.pin }} {{ cmp_address_line_detail.city }}<br />\n    </td></tr>\n    <tr><td>{{ _(\"Referenznummer\") }}<br />\n      {{ doc.esr_reference or doc.name }}</td></tr>\n    <tr><td>{{ _(\"Zus\u00e4tzliche Informationen\") }}<br />\n      {% if doc.esr_reference %}{{ doc.name }}{% else %}{{ doc.title }}{% endif %}</td></tr>\n    <tr><td>{{ _(\"Zahlungspflichtiger\") }}<br />\n      {{ pay_address_line_detail.name }}<br />\n      {{ pay_address_line_detail.street }} {{ pay_address_line_detail.number }}<br />\n      {{ pay_address_line_detail.country }}-{{ pay_address_line_detail.pin }} {{ pay_address_line_detail.city }}<br />\n    </td></tr>\n    <tr><td>{{ _(\"Zahlbar bis\") }}<br />\n      {{ doc.get_formatted('due_date') }}</td></tr>\n   </table>\n  </td>\n</tr>\n</table>\n\n<!-- control: customer address missing -->\n{% else %}\n<p>{{ _(\"Customer address missing, please add to sales invoice\") }}</p>\n{% endif %}\n\n  {% endif %}\n\n<!-- page footer -->\n<div id=\"footer-html\" class=\"visible-pdf\">\n  {% if letter_head %}\n    {{ letter_head.footer }}\n  {% else %}\n    <p>No letter head found. Please define a letter head under print settings and mark it as default</p>\n  {% endif %}\n  <p style=\"font-size: 6pt !important; text-align: right\">\n    {{ _(\"Page\") }} <span class=\"page\"></span> {{ _(\"of\") }} <span class=\"topage\"></span>\n  </p>\n</div>",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2022-07-27 20:28:04.399863",
 "modified_by": "Administrator",
 "module": "Kuchelmeister",
 "name": "Kuchelmeister Ausgangsrechnung",
 "owner": "Administrator",
 "print_format_builder": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}